extends ../layouts/dashboard.pug

block config
    - var bodyClass = 'sb-nav-fixed'
    - var pageTitle = 'Dashboard';
    - var index = false;
    - var sidenavStyle = 'sb-sidenav-dark'

block content
  .container-fluid.px-4
    h1.mt-4 Dashboard
    ol.breadcrumb.mb-4
      li.breadcrumb-item.active Admin Dashboard
    .row
      .col-xl-6
        .card.mb-4
          .card-header
            i.fas.fa-chart-area.me-1
            |                                         Issued AMBER Alerts (United States)
          .card-body
            canvas#myAreaChart(width='100%' height='40')
      .col-xl-6
        .card.mb-4
          .card-header
            i.fas.fa-chart-bar.me-1
            |                                         Electri-Assisted Solved Cases
          .card-body
            canvas#myBarChart(width='100%' height='40')
    .row
      .col-xl-3.col-md-6
        .card.bg-primary.text-white.mb-4
          .card-body Electri "Opt-In" Users: 234
          .card-footer.d-flex.align-items-center.justify-content-between
            a.small.text-white.stretched-link(href='#') View Details
            .small.text-white
              i.fas.fa-angle-right
      .col-xl-3.col-md-6
        .card.bg-warning.text-white.mb-4
          .card-body Case Status: Actively Seeking
          .card-footer.d-flex.align-items-center.justify-content-between
            a.small.text-white.stretched-link(href='#') View All
            .small.text-white
              i.fas.fa-angle-right
      .col-xl-3.col-md-6
        .card.bg-success.text-white.mb-4
          .card-body Case Status: Solved, Inactive
          .card-footer.d-flex.align-items-center.justify-content-between
            a.small.text-white.stretched-link(href='#') View All
            .small.text-white
              i.fas.fa-angle-right
      .col-xl-3.col-md-6
        .card.bg-danger.text-white.mb-4
          .card-body Case Status: Unsolved, Inactive
          .card-footer.d-flex.align-items-center.justify-content-between
            a.small.text-white.stretched-link(href='#') View All
            .small.text-white
              i.fas.fa-angle-right
    .card.mb-4
      .card-header
        i.fas.fa-table.me-1
        |                                 Alert Archives
      .card-body
        table#datatablesSimple
          script. 
            getAlerts().then(data => {
              console.log(data)
              table = document.getElementById("alertsTable");

              data['alerts'].forEach(element => {
                console.log(element)
                  row = document.createElement("tr")
                    d1 = document.createElement("td")
                    d1.innerHTML = element[0]
                    d2 = document.createElement("td")
                    d2.innerHTML = element[1]
                    d3 = document.createElement("td")
                    d3.innerHTML = element[2]
                    d4 = document.createElement("td")
                    d4.innerHTML = element[3]
                    d5 = document.createElement("td")
                    d5.innerHTML = element[4]
                    d6 = document.createElement("td")
                    d6.innerHTML = element[5]
                    d7 = document.createElement("td")
                    d7.innerHTML = element[6]
                    d8 = document.createElement("td")
                    d8div = document.createElement("div")
                    d8div.style = 'text-align: center'
                    dot = document.createElement("span")
                    if (element[7] ==1){
                      dot.class = 'greendot'
                    }else{
                      dot.class = 'yellowdot'
                    }
                    d8div.appendChild(dot)
                    d8.appendChild(d8div)
                    row.appendChild(d1)
                    row.appendChild(d2)
                    row.appendChild(d3)
                    row.appendChild(d4)
                    row.appendChild(d5)
                    row.appendChild(d6)
                    row.appendChild(d7)
                    row.appendChild(d8)
                  table.appendChild(row)
              });
            })
          thead
            tr
              th Alert ID
              th Timestamp
              th Location
              th Make
              th Model
              th LIC
              th Description
              th Status
          tfoot
            tr
              th Alert ID
              th Timestamp
              th Location
              th Make
              th Model
              th LIC
              th Description
              th Status
          tbody#alertsTable
            tr
              td A36748901
              td 22 OCT 2021, 14:15:09
              td San Francisco, CA
              td Toyota
              td Corolla
              td Black
              td 4SEY238
              td
                div(style='text-align: center')
                  span.yellowdot
            tr
              td A36748900
              td 22 OCT 2021, 12:08:17
              td Cincinnati, Ohio
              td Honda
              td --
              td Dark
              td 8GED124
              td
                div(style='text-align: center')
                  span.yellowdot
            tr
              td A36748899
              td 20 OCT 2021, 09:20:36
              td San Diego, CA
              td Toyota
              td Camry
              td Tan
              td --
              td
                div(style='text-align: center')
                  span.greendot
            tr
              td A36748888
              td 29 SEPT 2021, 23:15:54
              td Memphis, TN
              td Kia
              td Soul
              td Green
              td 7TRN768
              td
                div(style='text-align: center')
                  span.yellowdot
            tr
              td A36748887
              td 25 SEPT 2021, 14:09:43
              td Portland, Maine
              td Ford
              td Fiat
              td Red
              td --
              td
                div(style='text-align: center')
                  span.reddot
  script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js' crossorigin='anonymous')
  script(src='js/scripts.js')
  script(src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js' crossorigin='anonymous')
  script(src='assets/demo/chart-area-demo.js')
  script(src='assets/demo/chart-bar-demo.js')
  script(src='https://cdn.jsdelivr.net/npm/simple-datatables@latest' crossorigin='anonymous')
  script(src='js/datatables-simple-demo.js')
